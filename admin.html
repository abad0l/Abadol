<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إدارة المحتوى</title>

    <!-- 1. تحميل مكتبة Netlify Identity Widget -->
    <script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

    <!-- (اختياري) إضافة بعض الأنماط الأساسية -->
    <style>
        body { font-family: sans-serif; padding: 20px; background-color: #f4f4f4; }
        .hidden { display: none; }
        #admin-content { background-color: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-top: 20px;}
        h1, h2 { color: #333; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="text"], input[type="email"], textarea, select {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box; /* Ensures padding doesn't affect width */
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        button:hover { background-color: #0056b3; }
        .logout-btn { background-color: #dc3545; margin-top: 20px; }
        .logout-btn:hover { background-color: #c82333; }
        .form-section { border: 1px solid #eee; padding: 20px; margin-bottom: 20px; border-radius: 5px; }
        #loading-indicator { font-style: italic; color: #555; margin-top: 15px; }
        #error-message { color: red; margin-top: 15px; font-weight: bold; }
        #success-message { color: green; margin-top: 15px; font-weight: bold; }

         /* Styles for Netlify Identity Widget (optional customization) */
        [data-netlify-identity-menu] { /* Style the login button area */
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

    <h1>لوحة تحكم إدارة المحتوى</h1>

    <!-- 2. مكان ظهور واجهة تسجيل الدخول/الخروج من Netlify -->
    <div data-netlify-identity-menu></div>

    <!-- 3. المحتوى الذي يظهر فقط بعد تسجيل الدخول -->
    <div id="admin-content" class="hidden">
        <h2>أهلاً بك!</h2>
        <p>يمكنك إضافة وتعديل محتوى الكويز من هنا.</p>

        <div id="loading-indicator">جاري تحميل البيانات الحالية...</div>
        <div id="error-message" class="hidden"></div>
        <div id="success-message" class="hidden"></div>

        <!-- ========= نموذج إضافة سؤال جديد (كمثال أولي) ========= -->
        <div class="form-section">
            <h3>إضافة سؤال جديد</h3>
            <form id="add-question-form">
                <label for="course-select">اختر المادة:</label>
                <select id="course-select" required></select>

                <label for="lecture-select">اختر المحاضرة:</label>
                <select id="lecture-select" required disabled></select> <!-- يبدأ معطلاً -->

                <label for="question-text">نص السؤال:</label>
                <textarea id="question-text" rows="3" required></textarea>

                <label for="option-a">الخيار A:</label>
                <input type="text" id="option-a" required>

                <label for="option-b">الخيار B:</label>
                <input type="text" id="option-b" required>

                <label for="option-c">الخيار C:</label>
                <input type="text" id="option-c" required>

                <label for="option-d">الخيار D:</label>
                <input type="text" id="option-d" required>

                <label for="correct-answer">الإجابة الصحيحة:</label>
                <select id="correct-answer" required>
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                </select>

                <label for="explanation-text">الشرح:</label>
                <textarea id="explanation-text" rows="4" required></textarea>

                <button type="submit">إضافة السؤال</button>
            </form>
        </div>
        <!-- ========= نهاية نموذج إضافة سؤال ========= -->

        <!-- (يمكن إضافة نماذج أخرى هنا لإضافة مادة أو محاضرة أو بطاقة) -->

        <button class="logout-btn" onclick="netlifyIdentity.logout()">تسجيل الخروج</button>
    </div>

    <!-- 4. ربط ملف JavaScript للإدارة -->
    <script src="admin.js"></script>
</body>
</html>