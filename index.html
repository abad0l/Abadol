<!DOCTYPE html>
<html lang="en"> <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mr.Nursawy</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <link rel="stylesheet" href="style.css">
    <script src="app.js" defer></script>

</head>
<body>
    <div class="control-buttons">
        <button class="control-btn" id="sound-toggle" title="Toggle Sound">
            <i class="fas fa-volume-up"></i>
        </button>
        <button class="control-btn" id="dark-mode-toggle" title="Toggle Dark Mode">
            <i class="fas fa-moon"></i>
        </button>
    </div>
    <div class="container">
        <div id="home-section">
            <header>
                <h1>Mr.Nursawy</h1>
                <p class="subtitle">Made With Love by "Salah Eldeen" (أبادول)</p> <a href="https://t.me/MrNursawy" class="telegram-link" target="_blank">
                    <i class="fab fa-telegram"></i> Join our Telegram channel
                </a>
            </header>
            <div class="courses-container">
                <div class="courses-grid">
                    <p style="text-align: center; grid-column: 1 / -1; color: var(--medium-gray);">Loading courses...</p>
                </div>
            </div>
        </div>

        <div id="lectures-section" style="display: none;">
            <div class="lectures-header">
                <header>
                    <h1 id="course-title">Course Title</h1>
                    <p class="subtitle">Begin with the name of Allah</p> </header>
                <button class="back-btn" onclick="goBackToCourses()">
                    <i class="fas fa-arrow-left"></i> Back to Courses
                </button>
            </div>
            <div class="lectures-grid" id="lectures-container">
                </div>
        </div>

        <div id="lecture-content-section" style="display: none;">
            <div class="lectures-header">
                <header>
                    <h1 id="lecture-title">Lecture Title</h1>
                    <p class="subtitle">Begin with the name of Allah</p> </header>
                <button class="back-btn" onclick="goBackToLectures()">
                    <i class="fas fa-arrow-left"></i> Back to Lectures
                </button>
            </div>
            <div class="content-nav">
                <button class="content-btn active" data-content="quiz">
                    <i class="fas fa-question-circle"></i> Quiz
                </button>
                <button class="content-btn" data-content="explanation">
                    <i class="fas fa-book-open"></i> Explanation
                </button>
                <button class="content-btn" data-content="flip-cards">
                    <i class="fas fa-clone"></i> Flip Cards
                </button>
            </div>
            <div class="content-section active" id="quiz-content">
                <div class="question-counter">
                    Question <span id="current-question">1</span>/<span id="total-questions">?</span>
                </div>
                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                <div class="question-container">
                    <div id="category" class="category">Lecture Title</div>
                    <h2 id="question-text">Question text will appear here...</h2>
                    <div class="options" id="options-container">
                        </div>
                    <div class="feedback" id="feedback" style="display: none;"></div>
                    <div class="buttons-container">
                        <button id="prev-btn" class="btn btn-outline" onclick="prevQuestion()" disabled>
                            <i class="fas fa-arrow-left"></i> Previous
                        </button>
                        <div>
                            <button class="hint-btn" onclick="showHint()" id="hint-btn" title="Show Explanation">
                                <i class="fas fa-lightbulb"></i>
                            </button>
                            <button class="save-btn" onclick="saveQuestionAsImage()" title="Save Question as Image">
                                <i class="fas fa-camera"></i>
                            </button>
                        </div>
                        <button id="next-btn" class="btn" onclick="nextQuestion()" disabled> Next <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="content-section" id="explanation-content">
                <div class="explanation-content">
                    <h2>Detailed Explanation</h2>
                    <div class="explanation-text" id="lecture-explanation">
                        <p>Explanation currently unavailable.</p>
                    </div>
                </div>
            </div>
            <div class="content-section" id="flip-cards-content">
                <div class="flip-cards-container" id="flip-cards-container">
                    <p style="text-align: center; color: var(--medium-gray);">No flip cards available for this lecture.</p>
                </div>
            </div>
        </div>

        <div id="result-section" style="display: none;">
            <header>
                <h1>Quiz Results</h1>
                <p class="subtitle">Begin with the name of Allah</p> </header>
            <div class="result-container" id="result-container">
                <div class="result-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <h2 class="result-title" id="result-title">Quiz Completed!</h2>
                <div class="result-score" id="result-score">0%</div>
                <div class="result-meter">
                    <div class="meter-fill" id="meter-fill" style="width: 0%;"></div>
                </div>
                <div class="result-stats">
                    <div class="result-stat">
                        <div class="result-stat-value" id="result-correct">0</div>
                        <div class="result-stat-label">Correct Answers</div>
                    </div>
                    <div class="result-stat" onclick="showWrongQuestions()" style="cursor: pointer;" title="Click to review incorrect answers">
                        <div class="result-stat-value" id="result-incorrect">0</div>
                        <div class="result-stat-label">Incorrect Answers</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-value" id="result-percentage">0%</div>
                        <div class="result-stat-label">Success Rate</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-value" id="result-total">0</div>
                        <div class="result-stat-label">Total Questions</div>
                    </div>
                </div>
                <div class="result-actions">
                    <button class="btn" onclick="restartQuiz()">
                        <i class="fas fa-redo"></i> Try Again
                    </button>
                    <button class="btn btn-outline" onclick="goBackToLectures()">
                        <i class="fas fa-list"></i> Back to Lectures
                    </button>
                </div>
                <a href="https://t.me/MrNursawy" class="telegram-link" target="_blank" style="margin-top: 30px;">
                    <i class="fab fa-telegram"></i> Join our Telegram channel
                </a>
            </div>
            <div class="wrong-questions-container" id="wrong-questions-container" style="display: none;">
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--danger-color);">Questions Answered Incorrectly</h3>
                <div id="wrong-questions-list">
                    </div>
                <div class="close-wrong-questions">
                    <button class="btn btn-outline" onclick="closeWrongQuestions()">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
            </div>
        </div>
    </div> <button id="feedback-btn" class="feedback-btn" onclick="openFeedbackForm()">
        <i class="fas fa-comment"></i> Send Feedback
    </button>
    <div id="feedback-modal" class="feedback-modal" style="display: none;">
        <div class="feedback-content">
            <span class="close-btn" onclick="closeFeedbackForm()">&times;</span>
            <h2 style="color: var(--secondary-color); margin-bottom: 20px;">Share Your Feedback</h2>
            <form id="feedback-form" action="https://formsubmit.co/tu.salah.m@gmail.com" method="POST">
                <input type="hidden" name="_subject" value="New Feedback from Nursing Quiz">
                <input type="hidden" name="_captcha" value="false">
                <input type="text" name="_honey" style="display:none">
                <div class="form-group">
                    <label for="name">Your Name (Optional):</label>
                    <input type="text" id="name" name="name">
                </div>
                <div class="form-group">
                    <label for="email">Your Email (Optional):</label>
                    <input type="email" id="email" name="email">
                </div>
                <div class="form-group">
                    <label for="message">Your Feedback or Suggestion:</label>
                    <textarea id="message" name="message" required></textarea>
                </div>
                <button type="submit">Send</button>
                <div class="success-message" id="success-message" style="display: none;">Thank you! Your feedback has been sent successfully.</div>
            </form>
        </div>
    </div>
</body>
</html>